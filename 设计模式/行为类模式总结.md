---
title: 行为类模式总结
date: 2020-05-14 14:35:09
tags: 
	- Java
	- 面试
	- 基础
	- 设计模式
	- 创建类型模式
categories: 
	- 设计模式
---

**行为型模式主要是描述类或者对象是怎样交互和怎样分配职责**

行为型模式用于描述程序在运行时复杂的流程控制，即描述多个类或对象之间怎样相互协作共同完成单个对象都无法单独完成的任务，它涉及算法与对象间职责的分配。

**行为型模式分为类行为模式和对象行为模式**

- 类行为模式：采用继承机制来在类间分派行为
- 对象行为模式：采用组合或聚合在对象间分配行为

由于组合关系或聚合关系比继承关系耦合度低，满足“合成复用原则”，所以对象行为模式比类行为模式具有更大的灵活性。

行为类型设计模式有11种：

- 模版方法：(AsyncTask)**定义一套流程模板，根据需要实现模板中的操作。**
  - 定义一个操作中的算法骨架，将算法的一些步骤延迟到子类中，使得子类在可以不改变该算法结构的情况下重定义该算法的某些特定步骤。

- 中介者：（房屋中介、Android锁屏KeyGuardViewMediator）**将网状结构转变为星型结构，所有行为都通过中介**
  - 定义一个中介对象来简化原有对象之间的交互关系，降低系统中对象间的耦合度，使原有对象之间不必相互了解。
    - 将网状结构转化成星型结构，可以避免同事类之间的过度耦合
    - 同事对象只知道中介者而不知道其他同事对象，同事类之间必须通过中介者才能进行消息传递
- 观察者：（ListView中notifyDataSetChanged）**状态发生改变时通知观察者，一对多的关系。**
  - 指多个对象间存在一对多的依赖关系，当一个对象的状态发生改变时，所有依赖于它的对象都得到通知并被自动更新。这种模式有时又称作发布-订阅模式、模型-视图模式。
- 访问者：**稳定数据结构中，定义新的操作行为**
  - 将作用于某种数据结构中的各元素的操作分离出来封装成独立的类，使其在不改变数据结构的前提下可以添加作用于这些元素的新的操作，为数据结构中的每个元素提供多种访问方式。它将对数据的操作与数据结构进行分离，是行为类模式中最复杂的一种模式。
- 命令模式：（PackageManagerService）**将请求封装成命令，并记录下来，能够撤销与重做**
  - 将一个请求封装为一个对象，使发出请求的责任和执行请求的责任分割开。这样两者之间通过命令对象进行沟通，这样方便将命令对象进行储存、传递、调用、增加与管理。
- 责任链模式：(OkHttp拦截器、View事件分发机制)**将事件沿着链去处理。**
  - 为了避免请求发送者与多个请求处理者耦合在一起，将所有请求的处理者通过前一对象记住其下一个对象的引用而连成一条链；当有请求发生时，可将请求沿着这条链传递，直到有对象处理它为止。
- 策略模式（插值器）**封装不同的算法，算法之间能互相替换。**
- 迭代器模式（Map、List等有用到迭代器模式，Cursor）**提供一种方法访问一个容器对象中各个元素。**
  - 至少提供hasNext()和next()方法
- 解释器模式（正则）**定义语法，并对其进行解释**
  - 给定一种语言，定义他的文法的一种表示，并定义一个解释器，该解释器使用该表示来解释语言中句子
    - 正则表达式Pattern
    - 解释加减乘除、或与非
    - 时间格式化Format、Html格式化、Integer.parseInt解析、SQL解析
- 备忘录模式（Activity的onSaveInstanceState）**保存对象的状态，在需要时进行恢复**
  - 在不破坏封装性的前提下，捕获一个对象的内部状态，并在该对象之外保存这个状态，以便以后当需要时能将该对象恢复到原先保存的状态。该模式又叫快照模式。
- 状态模式：（）**根据不同的状态做出不同的行为。**
  - 对有状态的对象，把复杂的“判断逻辑”提取到不同的状态对象中，允许状态对象在其内部状态发生改变时改变其行为。
    - 把所研究的对象的行为包装在不同的状态对象里
    - 登录状态、未登录状态下用户的行为

